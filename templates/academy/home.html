{% extends "base.html" %}
{% block title %}Close The Gap Academy{% endblock %}
{% block content %}
<div class="row mb-4">
  <div class="col">
    <h1 class="display-5">Close The Gap Academy</h1>
    <p class="lead">
      Grow your skills with curated video lessons and module-end assessments designed to close the gap between ambition and achievement.
    </p>
    {% if not user.is_authenticated %}
    <a class="btn btn-primary" href="{% url 'academy:register' %}">Get Started</a>
    {% endif %}
  </div>
</div>
<div class="row">
  {% for module in modules %}
  <div class="col-md-4 mb-4">
    <div class="card h-100 module-card">
      <div class="module-card__image-wrapper">
        {% if module.image %}
        <img
          src="{{ module.image.url }}"
          class="card-img-top module-card__image"
          alt="{{ module.title }} cover image"
        />
        {% else %}
        <div class="module-card__image module-card__image--placeholder d-flex align-items-center justify-content-center">
          <span class="module-card__placeholder-text">Close The Gap Academy</span>
        </div>
        {% endif %}
        {% if module.is_recommended %}
        <span class="badge bg-warning text-dark module-card__badge">Recommended</span>
        {% endif %}
      </div>
      <div class="card-body d-flex flex-column">
        <h5 class="card-title">{{ module.title }}</h5>
        <p class="card-text text-muted small mb-2">{{ module.lessons.all|length }} lessons</p>
        <p class="card-text">{{ module.description|truncatechars:120 }}</p>
        <div class="mt-auto d-flex justify-content-between align-items-center">
          <span class="fs-5 fw-semibold text-primary">${{ module.price|floatformat:2 }}</span>
          <a class="btn btn-outline-primary" href="{% url 'academy:module_detail' module.slug %}">View Module</a>
        </div>
      </div>
    </div>
  </div>
  {% empty %}
  <div class="col">
    <p>No modules available yet. Check back soon!</p>
  </div>
  {% endfor %}
</div>
{% endblock %}
